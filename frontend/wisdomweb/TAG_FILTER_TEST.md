# 标签筛选功能测试指南

## 🎯 测试目标

验证标签筛选功能是否正确工作，确保：

1. 标签筛选栏显示所有用户添加的标签
2. 点击标签后正确筛选出具有该标签的所有收藏
3. 显示每个标签对应的收藏数量
4. 标签筛选与搜索功能协调工作

## 📋 测试数据

### 用户数据

- **用户1**: admin@example.com / 123456
- **用户2**: user@example.com / 123456

### 收藏数据（用户1）

1. **Vue.js** - 标签: [技术, 编程, Vue]
2. **GitHub** - 标签: [技术, 编程, 工具]
3. **React** - 标签: [技术, 编程, React, 前端]
4. **MDN Web Docs** - 标签: [技术, 学习, 文档]
5. **Stack Overflow** - 标签: [学习, 编程, 问答]

### 收藏数据（用户2）

1. **Stack Overflow** - 标签: [学习, 编程]

## 🧪 测试步骤

### 1. 基础功能测试

#### 1.1 登录测试

```bash
# 使用用户1登录
邮箱: admin@example.com
密码: 123456
```

**预期结果**：

- ✅ 登录成功
- ✅ 进入主界面
- ✅ 副界面显示标签筛选栏

#### 1.2 标签显示测试

**检查项目**：

- [ ] 标签筛选栏显示"全部"按钮
- [ ] 显示所有用户添加的标签
- [ ] 每个标签显示对应的收藏数量
- [ ] 标签按字母顺序排序

**预期标签列表**：

- 全部 (5)
- 前端 (1)
- 工具 (1)
- 技术 (4)
- 学习 (2)
- 文档 (1)
- 编程 (5)
- 问答 (1)
- React (1)
- Vue (1)

### 2. 标签筛选测试

#### 2.1 全部标签测试

**操作**：点击"全部"按钮

**预期结果**：

- ✅ 显示用户的所有收藏（5个）
- ✅ "全部"按钮高亮显示
- ✅ 其他标签按钮取消高亮

#### 2.2 单个标签筛选测试

**操作**：点击"技术"标签

**预期结果**：

- ✅ 显示具有"技术"标签的收藏（4个）
- ✅ "技术"按钮高亮显示
- ✅ 显示以下收藏：
  - Vue.js
  - GitHub
  - React
  - MDN Web Docs

#### 2.3 多个标签筛选测试

**操作**：依次点击不同标签

**测试标签**：

- [ ] "编程" - 应显示5个收藏
- [ ] "学习" - 应显示2个收藏
- [ ] "前端" - 应显示1个收藏
- [ ] "Vue" - 应显示1个收藏
- [ ] "React" - 应显示1个收藏

### 3. 搜索与筛选协调测试

#### 3.1 搜索后筛选测试

**操作步骤**：

1. 在搜索框输入"Vue"
2. 点击搜索
3. 点击"技术"标签

**预期结果**：

- ✅ 搜索结果显示包含"Vue"的收藏
- ✅ 点击标签后显示具有"技术"标签的所有收藏
- ✅ 搜索状态被清除

#### 3.2 筛选后搜索测试

**操作步骤**：

1. 点击"技术"标签
2. 在搜索框输入"React"
3. 点击搜索

**预期结果**：

- ✅ 显示同时具有"技术"标签且包含"React"的收藏
- ✅ 标签筛选状态保持

### 4. 分页功能测试

#### 4.1 分页显示测试

**操作**：点击"编程"标签（有5个收藏）

**预期结果**：

- ✅ 如果每页显示3个，应该显示分页控件
- ✅ 第一页显示3个收藏
- ✅ 第二页显示2个收藏
- ✅ 分页信息正确显示

#### 4.2 分页切换测试

**操作步骤**：

1. 点击"编程"标签
2. 点击"下一页"
3. 点击"上一页"

**预期结果**：

- ✅ 页面正确切换
- ✅ 收藏列表正确更新
- ✅ 当前页码正确显示

### 5. 新收藏添加测试

#### 5.1 添加新收藏测试

**操作步骤**：

1. 在主界面输入新网页URL
2. 点击"收藏"按钮
3. 在标签管理对话框中添加新标签
4. 确认收藏

**预期结果**：

- ✅ 标签管理对话框正确显示
- ✅ 可以添加多个标签
- ✅ 标签实时显示
- ✅ 收藏添加成功后标签列表更新

#### 5.2 新标签显示测试

**操作**：添加包含新标签的收藏

**预期结果**：

- ✅ 新标签出现在标签筛选栏
- ✅ 新标签显示正确的收藏数量
- ✅ 点击新标签正确筛选收藏

## 🔍 问题排查

### 常见问题

#### 1. 标签不显示

**可能原因**：

- API调用失败
- 数据格式错误
- 用户ID不匹配

**排查方法**：

```javascript
// 检查控制台错误
console.log('用户标签:', this.userTags)
console.log('标签数量:', this.tagCounts)
```

#### 2. 筛选不生效

**可能原因**：

- selectedTag状态未更新
- API参数错误
- 数据过滤逻辑错误

**排查方法**：

```javascript
// 检查筛选状态
console.log('当前选中标签:', this.selectedTag)
console.log('收藏列表:', this.bookmarks)
```

#### 3. 数量显示错误

**可能原因**：

- tagCounts计算错误
- 数据不同步

**排查方法**：

```javascript
// 检查标签数量
console.log('标签数量统计:', this.tagCounts)
```

### 调试工具

#### 1. 浏览器开发者工具

- **Console**: 查看错误信息和调试日志
- **Network**: 检查API请求和响应
- **Vue DevTools**: 查看组件状态

#### 2. 测试数据验证

```javascript
// 在控制台执行以下代码验证数据
const userId = localStorage.getItem('userId')
console.log('当前用户ID:', userId)

// 验证收藏数据
console.log(
  '所有收藏:',
  mockBookmarks.filter((b) => b.userId === userId),
)

// 验证标签数据
const userBookmarks = mockBookmarks.filter((b) => b.userId === userId)
const allTags = userBookmarks.flatMap((b) => b.tags || [])
const uniqueTags = [...new Set(allTags)].sort()
console.log('用户标签:', uniqueTags)
```

## 📊 测试报告模板

### 测试结果记录

| 测试项目     | 预期结果         | 实际结果 | 状态 | 备注 |
| ------------ | ---------------- | -------- | ---- | ---- |
| 标签显示     | 显示所有用户标签 |          |      |      |
| 标签数量     | 显示正确数量     |          |      |      |
| 全部筛选     | 显示所有收藏     |          |      |      |
| 单个标签筛选 | 显示对应收藏     |          |      |      |
| 搜索协调     | 搜索筛选协调     |          |      |      |
| 分页功能     | 分页正确显示     |          |      |      |
| 新收藏添加   | 标签列表更新     |          |      |      |

### 问题记录

| 问题描述 | 严重程度 | 复现步骤 | 解决方案 |
| -------- | -------- | -------- | -------- |
|          |          |          |          |

## ✅ 验收标准

### 功能验收

- [ ] 标签筛选栏正确显示所有用户标签
- [ ] 点击标签正确筛选收藏
- [ ] 标签数量显示正确
- [ ] 搜索与筛选协调工作
- [ ] 分页功能正常
- [ ] 新收藏添加后标签更新

### 性能验收

- [ ] 页面加载时间 < 2秒
- [ ] 标签筛选响应时间 < 500ms
- [ ] 搜索响应时间 < 1秒

### 用户体验验收

- [ ] 界面美观，交互流畅
- [ ] 标签按钮有悬停效果
- [ ] 选中状态明显
- [ ] 响应式设计适配各种屏幕

---

通过以上测试，可以全面验证标签筛选功能的正确性和用户体验。
